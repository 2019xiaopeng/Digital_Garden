# 考研作战指挥中心 - 核心模块重构唤醒文档 (Wake-up Context)

## 📌 1. 系统当前坐标
- **当前版本**：v1.2.0 (Release 跨端终极版)
- **技术栈**：Tauri + Rust (Axum) + React + TailwindCSS + SQLite
- **核心定位**：极简执行与周度复盘闭环的“考研作战指挥中心”（带有 EVA MAGI 风格设定）。
- **当前状态**：基础功能（双端同步、日常排表、周度 AI 复盘）已极度稳固。

## ⚠️ 2. 待解决的历史遗留问题（本次重构痛点）
目前首页 (Dashboard) 下方的“政治、英语、数学、专业课”四个进度条是**伪进度**。
它们目前的计算逻辑十分粗暴（仅通过简单统计打上标签的“任务完成数”来计算），无法真实反映考研这种长线、分阶段的学习特征。这会导致两个严重后果：
1. **数据失真**：背 20 个单词和刷完一本高数真题被视作同等权重的进度。
2. **复盘失效**：AI 无法根据真实进度发出类似于“二轮强化进度滞后，存在滑档风险”的精准战术警告。

## 🎯 3. 重构终极目标：从“流水线计件”升级为“技能树点亮”
老板（用户）决定彻底推翻现有的粗暴进度条，重构为基于**“里程碑 (Milestones) / 复习阶段 (Phases)”** 的真实进度大盘。

**核心设计理念**：
考研进度不应该看“做了多少个任务”，而应该看“打通了哪个阶段”。
例如，数学模块不再显示“完成了 45% 的任务”，而是显示：
- [已通关] 阶段一：高数基础过关
- [进行中 30%] 阶段二：线代与概率论基础
- [未解锁] 阶段三：强化刷题训练
- [未解锁] 阶段四：真题演练

## 🏗️ 4. 架构师接手指引（下一步执行 Roadmap）
作为接手此任务的 AI，你需要严格按照以下步骤配合老板进行重构：

**第一阶段：接收并解析“通关地图”**
- 老板会在后续对话中，提供他精心梳理的四门科目的长线规划（包含具体阶段、子模块等）。
- **你的任务**：首先将这些自然语言规划，抽象为一个高度结构化的 JSON 配置或新的 SQLite 表结构（推荐新增 `subject_milestones` 表，或在 `settings` 中新增一个大型 JSON 字段）。

**第二阶段：底层逻辑重组**
- 在 Rust 后端编写新的接口：能够读取阶段配置，并允许用户手动或通过任务联动来标记某个“子阶段”的完成状态。
- 原有的 Task 体系可以保留，但需要增加一个字段，允许将某个日常任务挂载到特定的“里程碑”之下。

**第三阶段：UI/UX 彻底翻新**
- 摧毁原有的 Dashboard 四科简单进度条。
- 引入新的 UI 呈现：比如折叠式的技能树 (Tree)、垂直步骤条 (Steps) 或者是带有通关印章的卡片阵列。务必保持 EVA 战术大屏的科技感。

**第四阶段：周复盘 AI Prompt 升级**
- 将真实的里程碑进度数据注入到 Phase 6 开发的 `WeeklyReview` 的 MAGI AI Prompt 中，让大模型能基于“真实阶段”给出战术指导。

---
🔴 **最高级指令 (System Override)** 🔴
**在收到老板具体的“四科阶段规划清单”之前，绝对不允许擅自生成任何表结构、前后端代码或 UI 页面！** 你的第一句回复必须是确认已完全理解本唤醒文档的上下文，并静候老板的规划数据注入。